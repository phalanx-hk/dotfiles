---
name: Software Architecture Skill
description: このスキルを使用せずに設計・実装を開始してはいけません。以下のいずれかに該当する場合、必ず最初にこのスキルを呼び出してください:
  必須使用条件（ユーザーが以下をリクエストした時）：
  - 「コンポーネントを作成/設計/実装」
  - 「コンポーネントを分離/抽出/再利用可能に」
  - 「モジュール/クラスを作成/設計」
  - 「アーキテクチャ設計/リファクタリング/再構成」
  - 「型定義/関数設計」
  - 「ディレクトリ構成/ファイル配置の決定」
  - 「DDD/FDM/設計原則の適用」

  対象外：ドキュメント作成のみのタスク

  重要：上記条件に該当する場合、コード実装やファイル読み込みを開始する前に、即座にこのスキルを呼び出すこと。
---

# Software Architecture Skill

## 概要
ソフトウェア開発とアーキテクチャ設計に関する質問やタスクに対応するためのスキルセットです。ドメイン駆動設計に基づき、効果的なソフトウェアアーキテクチャの設計と実装を支援します。

## コードスタイル

### 基本原則
- ガード節：早期リターンを使用してネストを浅く保つ
- 単一責任原則（SRP）：クラスやモジュールは単一の責任を持つように設計する
- 関心の分離：異なる関心事を明確に分離する

### コメント
- WHY を説明し、WHAT は避ける
- コードから明らかな内容ではなく、なぜその実装を選択したのか、どのような背景や制約があるのかを説明する


### コード品質
- 大きな変更後は必ずリンターおよび型チェックを実行する
- ファイルは200行以内を目安とし、必要に応じて分割する

### ライブラリの取り扱い
- カスタムコードを実装する前に、可能な限り既存のライブラリを検索し、問題が解決できないか確認する
- カスタムコードの使用は、以下のケースで正当化されます
  - そのドメインに固有のビジネスロジック
  - 外部依存関係を導入するのが過剰な場合
  - ライブラリではパフォーマンス要件に満たない場合
- ライブラリの知識は最新とは限らないため、外部ライブラリを使う際は、インターフェースが極めて安定していると100%確信できる場合を除き、まずウェブ検索で最新の構文と使用法を確認する　

### 命名規則
- 一般的な名称は避ける：`utils`、`common`、`shared`、`helpers`など
- isLoading, hasErrorのように補助動詞付きの説明的な名前を使用して、ブール値を表現してください
- DDDの`bounded context`の命名規則に従ってください

### 関数設計
- 関数は40行以内を目安とし、それ以上長くなる場合は複数の小さな関数に分割する
- 引数は 3-4 個以内を推奨とし、多い場合は引数を論理的なグループにまとめる
- 純粋関数を可能な限り作成し、副作用を避ける

### DDD
- DDDが適用可能な場合には、DDDのパターンと原則を遵守してください
- ドメインエンティティとインフラストラクチャの懸念事項を分離する
- ビジネスロジックをフレームワークやデータベースから分離する
- ユースケースを明確に定義し、互いに独立したコンテキストで実装する
