---
paths: **/*.ts, **/*.tsx, **/*.js, **/*.jsx, **/*.svelte
---

このルールを使用するときには、回答時に 🚀 の絵文字をつけてください。

# typescriptスタイルガイド

## JavaScriptランタイム

ランタイムにはBunを使用する

## 基本原則

- 再代入しない変数には`const`を使用し、再代入する変数には`let`を使用する
- 制御構文では、1行だけのブロックでも必ず中括弧 `{}` を使用する
- `Object.assign` よりもスプレッド構文 `{...obj}` を使用する

## importの整理

- importはファイルの先頭にまとめる
- importの順番は以下の通りに整理する
  `組み込みモジュール` → `サードパーティモジュール` → `社内モジュール` → `相対パスモジュール`
- 各importグループの間に空行を入れる
- 各グループ内ではimportをアルファベット順にソートする
- 重複したimportを避ける


## 型定義

- オブジェクト定義には`type`エイリアスを使用してください。`interface`は使用しないでください。
- `any`は絶対に使わないこと。どうしても使いたくなった場合は、代わりに`unknown`を使用してください
- 関数の引数、戻り値、オブジェクトリテラルは必ず明示的に型を付与してください
- `Enum`は使わないでください。代わりに`Union Type`を使用してください
- 変更しないプロパティや配列には`readonly`を付与してください
- 再利用可能な型にはジェネリクスを使用してください

## 型検証

型検証ライブラリとして`zod`を使用してください

### 型アサーションよりもzodを優先する

- 外部データソース、APIレスポンス、ユーザ入力に対して決して型アサーション(`as Type`)を使わない
- 代わりにzodスキーマを定義し、`parse`メソッドで検証を行う
- バリデーション失敗時には適切なエラーハンドリングを実装すること

## エラーハンドリング
- ドメイン固有のエラーにはカスタムエラー型を作成する
- 失敗する可能性のある処理にはResult型を使用する
- Promiseのrejectを適切にハンドリングする

## コードの整理

- 型は専用ファイル(types.ts)や実装と同じファイル内で整理
- 複雑な型はJSDocコメントでドキュメントを記載、簡単な型はコメント不要
